location @error401 {
  content_by_lua_block {
    ngx.status = 488;
    ngx.header.content_type = 'text/html';
    local style = '<style>@keyframes anim{0%,100%,80%{transform:scale(0)}40%{transform:scale(1)}}body,html{width:100%;height:100%;padding:0;margin:0;background-color:#fff}.s{padding-top:30vh;margin:0 auto;width:192px;text-align:center}.s>div{width:56px;height:56px;background-color:#607d8b;border-radius:100%;display:inline-block;animation:anim 1.4s infinite ease-in-out both}.s .b1{animation-delay:-.32s}.s .b2{animation-delay:-.16s}</style>';
    local html = '<!doctype html><html><head><meta charset="utf-8"><title>Please wait...</title><link rel="icon" href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><script>setTimeout(function(){window.location.href="/.well-known/protection/challenge?url=%s"},2e3)</script>%s</head><body><div class="s"><div class="b1"></div><div class="b2"></div><div></div></div></body></html>';
    ngx.say(string.format(html, ngx.var.request_uri, style));
  }
}
